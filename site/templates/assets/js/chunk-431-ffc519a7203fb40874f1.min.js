/*! For license information please see chunk-431-ffc519a7203fb40874f1.min.js.LICENSE.txt */
(self.webpackChunkwww_musical_fabrik_de=self.webpackChunkwww_musical_fabrik_de||[]).push([[431],{4431:function(t,e,o){var a,r;a=[o(9755)],void 0===(r=function(t){return e=t,void function(){"use strict";var t,o,a={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:(t=!1,o=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),o&&parseInt(o[2],10)<54&&(t=!0),t)},r=function(t){return this.core=e(t).data("lightGallery"),this.core.s=e.extend({},a,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=e(window).width()/2,this.pageY=e(window).height()/2+e(window).scrollTop()),this};r.prototype.init=function(){var t=this,o='<button type="button" aria-label="Zoom in" id="lg-zoom-in" class="lg-icon"></button><button type="button" aria-label="Zoom out" id="lg-zoom-out" class="lg-icon"></button>';t.core.s.actualSize&&(o+='<button type="button" aria-label="Actual size" id="lg-actual-size" class="lg-icon"></button>'),t.core.s.useLeftForZoom?t.core.$outer.addClass("lg-use-left-for-zoom"):t.core.$outer.addClass("lg-use-transition-for-zoom"),this.core.$outer.find(".lg-toolbar").append(o),t.core.$el.on("onSlideItemLoad.lg.tm.zoom",(function(o,a,r){var i=t.core.s.enableZoomAfter+r;e("body").hasClass("lg-from-hash")&&r?i=0:e("body").removeClass("lg-from-hash"),t.zoomabletimeout=setTimeout((function(){t.core.$slide.eq(a).addClass("lg-zoomable")}),i+30)}));var a=1,r=function(o){var a=t.core.$outer.find(".lg-current .lg-image"),r=(e(window).width()-a.prop("offsetWidth"))/2,i=(e(window).height()-a.prop("offsetHeight"))/2+e(window).scrollTop(),s=(o-1)*(t.pageX-r),n=(o-1)*(t.pageY-i);a.css("transform","scale3d("+o+", "+o+", 1)").attr("data-scale",o),t.core.s.useLeftForZoom?a.parent().css({left:-s+"px",top:-n+"px"}).attr("data-x",s).attr("data-y",n):a.parent().css("transform","translate3d(-"+s+"px, -"+n+"px, 0)").attr("data-x",s).attr("data-y",n)},i=function(){a>1?t.core.$outer.addClass("lg-zoomed"):t.resetZoom(),a<1&&(a=1),r(a)},s=function(o,r,s,n){var l,g=r.prop("offsetWidth");l=t.core.s.dynamic?t.core.s.dynamicEl[s].width||r[0].naturalWidth||g:t.core.$items.eq(s).attr("data-width")||r[0].naturalWidth||g,t.core.$outer.hasClass("lg-zoomed")?a=1:l>g&&(a=l/g||2),n?(t.pageX=e(window).width()/2,t.pageY=e(window).height()/2+e(window).scrollTop()):(t.pageX=o.pageX||o.originalEvent.targetTouches[0].pageX,t.pageY=o.pageY||o.originalEvent.targetTouches[0].pageY),i(),setTimeout((function(){t.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")}),10)},n=!1;t.core.$el.on("onAferAppendSlide.lg.tm.zoom",(function(e,o){var a=t.core.$slide.eq(o).find(".lg-image");a.on("dblclick",(function(t){s(t,a,o)})),a.on("touchstart",(function(t){n?(clearTimeout(n),n=null,s(t,a,o)):n=setTimeout((function(){n=null}),300),t.preventDefault()}))})),e(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",(function(){t.pageX=e(window).width()/2,t.pageY=e(window).height()/2+e(window).scrollTop(),r(a)})),e("#lg-zoom-out").on("click.lg",(function(){t.core.$outer.find(".lg-current .lg-image").length&&(a-=t.core.s.scale,i())})),e("#lg-zoom-in").on("click.lg",(function(){t.core.$outer.find(".lg-current .lg-image").length&&(a+=t.core.s.scale,i())})),e("#lg-actual-size").on("click.lg",(function(e){s(e,t.core.$slide.eq(t.core.index).find(".lg-image"),t.core.index,!0)})),t.core.$el.on("onBeforeSlide.lg.tm",(function(){a=1,t.resetZoom()})),t.zoomDrag(),t.zoomSwipe()},r.prototype.getCurrentTransform=function(t){if(!t)return 0;var e=window.getComputedStyle(t,null),o=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform")||"none";return"none"!==o?o.split("(")[1].split(")")[0].split(","):0},r.prototype.getCurrentRotation=function(t){if(!t)return 0;var e=this.getCurrentTransform(t);return e?Math.round(Math.atan2(e[1],e[0])*(180/Math.PI)):0},r.prototype.getModifier=function(t,e,o){var a=t;t=Math.abs(t);var r=this.getCurrentTransform(o);if(!r)return 1;var i=1;if("X"===e){var s=Math.sign(parseFloat(r[0]));0===t||180===t?i=1:90===t&&(i=-90===a&&1===s||90===a&&-1===s?-1:1),i*=s}else{var n=Math.sign(parseFloat(r[3]));if(0===t||180===t)i=1;else if(90===t){var l=parseFloat(r[1]),g=parseFloat(r[2]);i=Math.sign(l*g*a*n)}i*=n}return i},r.prototype.getImageSize=function(t,e,o){var a={y:"offsetHeight",x:"offsetWidth"};return 90===e&&(o="x"===o?"y":"x"),t.prop(a[o])},r.prototype.getDragCords=function(t,e){return 90===e?{x:t.pageY,y:t.pageX}:{x:t.pageX,y:t.pageY}},r.prototype.getSwipeCords=function(t,e){var o=t.originalEvent.targetTouches[0].pageX,a=t.originalEvent.targetTouches[0].pageY;return 90===e?{x:a,y:o}:{x:o,y:a}},r.prototype.getPossibleDragCords=function(t,e){var o=(this.core.$outer.find(".lg").height()-this.getImageSize(t,e,"y"))/2,a=Math.abs(this.getImageSize(t,e,"y")*Math.abs(t.attr("data-scale"))-this.core.$outer.find(".lg").height()+o),r=(this.core.$outer.find(".lg").width()-this.getImageSize(t,e,"x"))/2,i=Math.abs(this.getImageSize(t,e,"x")*Math.abs(t.attr("data-scale"))-this.core.$outer.find(".lg").width()+r);return 90===e?{minY:r,maxY:i,minX:o,maxX:a}:{minY:o,maxY:a,minX:r,maxX:i}},r.prototype.getDragAllowedAxises=function(t,e){var o=this.getImageSize(t,e,"y")*t.attr("data-scale")>this.core.$outer.find(".lg").height(),a=this.getImageSize(t,e,"x")*t.attr("data-scale")>this.core.$outer.find(".lg").width();return 90===e?{allowX:o,allowY:a}:{allowX:a,allowY:o}},r.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=e(window).width()/2,this.pageY=e(window).height()/2+e(window).scrollTop()},r.prototype.zoomSwipe=function(){var t,e=this,o={},a={},r=!1,i=!1,s=!1,n=0;e.core.$slide.on("touchstart.lg",(function(a){if(e.core.$outer.hasClass("lg-zoomed")){var r=e.core.$slide.eq(e.core.index).find(".lg-object");t=e.core.$slide.eq(e.core.index).find(".lg-img-rotate")[0],n=e.getCurrentRotation(t);var l=e.getDragAllowedAxises(r,Math.abs(n));s=l.allowY,((i=l.allowX)||s)&&(a.preventDefault(),o=e.getSwipeCords(a,Math.abs(n)))}})),e.core.$slide.on("touchmove.lg",(function(l){if(e.core.$outer.hasClass("lg-zoomed")){var g,d,c=e.core.$slide.eq(e.core.index).find(".lg-img-wrap");l.preventDefault(),r=!0,a=e.getSwipeCords(l,Math.abs(n)),e.core.$outer.addClass("lg-zoom-dragging"),d=s?-Math.abs(c.attr("data-y"))+(a.y-o.y)*e.getModifier(n,"Y",t):-Math.abs(c.attr("data-y")),g=i?-Math.abs(c.attr("data-x"))+(a.x-o.x)*e.getModifier(n,"X",t):-Math.abs(c.attr("data-x")),(Math.abs(a.x-o.x)>15||Math.abs(a.y-o.y)>15)&&(e.core.s.useLeftForZoom?c.css({left:g+"px",top:d+"px"}):c.css("transform","translate3d("+g+"px, "+d+"px, 0)"))}})),e.core.$slide.on("touchend.lg",(function(){e.core.$outer.hasClass("lg-zoomed")&&r&&(r=!1,e.core.$outer.removeClass("lg-zoom-dragging"),e.touchendZoom(o,a,i,s,n))}))},r.prototype.zoomDrag=function(){var t,o=this,a={},r={},i=!1,s=!1,n=!1,l=!1,g=0;o.core.$slide.on("mousedown.lg.zoom",(function(r){t=o.core.$slide.eq(o.core.index).find(".lg-img-rotate")[0],g=o.getCurrentRotation(t);var s=o.core.$slide.eq(o.core.index).find(".lg-object"),d=o.getDragAllowedAxises(s,Math.abs(g));l=d.allowY,n=d.allowX,o.core.$outer.hasClass("lg-zoomed")&&e(r.target).hasClass("lg-object")&&(n||l)&&(r.preventDefault(),a=o.getDragCords(r,Math.abs(g)),i=!0,o.core.$outer.scrollLeft+=1,o.core.$outer.scrollLeft-=1,o.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))})),e(window).on("mousemove.lg.zoom",(function(e){if(i){var d,c,u=o.core.$slide.eq(o.core.index).find(".lg-img-wrap");s=!0,r=o.getDragCords(e,Math.abs(g)),o.core.$outer.addClass("lg-zoom-dragging"),c=l?-Math.abs(u.attr("data-y"))+(r.y-a.y)*o.getModifier(g,"Y",t):-Math.abs(u.attr("data-y")),d=n?-Math.abs(u.attr("data-x"))+(r.x-a.x)*o.getModifier(g,"X",t):-Math.abs(u.attr("data-x")),o.core.s.useLeftForZoom?u.css({left:d+"px",top:c+"px"}):u.css("transform","translate3d("+d+"px, "+c+"px, 0)")}})),e(window).on("mouseup.lg.zoom",(function(t){i&&(i=!1,o.core.$outer.removeClass("lg-zoom-dragging"),!s||a.x===r.x&&a.y===r.y||(r=o.getDragCords(t,Math.abs(g)),o.touchendZoom(a,r,n,l,g)),s=!1),o.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")}))},r.prototype.touchendZoom=function(t,e,o,a,r){var i=this,s=i.core.$slide.eq(i.core.index).find(".lg-img-wrap"),n=i.core.$slide.eq(i.core.index).find(".lg-object"),l=i.core.$slide.eq(i.core.index).find(".lg-img-rotate")[0],g=-Math.abs(s.attr("data-x"))+(e.x-t.x)*i.getModifier(r,"X",l),d=-Math.abs(s.attr("data-y"))+(e.y-t.y)*i.getModifier(r,"Y",l),c=i.getPossibleDragCords(n,Math.abs(r));(Math.abs(e.x-t.x)>15||Math.abs(e.y-t.y)>15)&&(a&&(d<=-c.maxY?d=-c.maxY:d>=-c.minY&&(d=-c.minY)),o&&(g<=-c.maxX?g=-c.maxX:g>=-c.minX&&(g=-c.minX)),a?s.attr("data-y",Math.abs(d)):d=-Math.abs(s.attr("data-y")),o?s.attr("data-x",Math.abs(g)):g=-Math.abs(s.attr("data-x")),i.core.s.useLeftForZoom?s.css({left:g+"px",top:d+"px"}):s.css("transform","translate3d("+g+"px, "+d+"px, 0)"))},r.prototype.destroy=function(){var t=this;t.core.$el.off(".lg.zoom"),e(window).off(".lg.zoom"),t.core.$slide.off(".lg.zoom"),t.core.$el.off(".lg.tm.zoom"),t.resetZoom(),clearTimeout(t.zoomabletimeout),t.zoomabletimeout=!1},e.fn.lightGallery.modules.zoom=r}();var e}.apply(e,a))||(t.exports=r)}}]);